Refactored version of simple-malloc by Reuben Tanner.
